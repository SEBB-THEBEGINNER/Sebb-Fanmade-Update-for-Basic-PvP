-- Create the GUI
local player = game.Players.LocalPlayer
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = player.PlayerGui

-- Create the button for the One Hit KO Punch
local button = Instance.new("TextButton")
button.Size = UDim2.new(0, 200, 0, 50)
button.Position = UDim2.new(0.5, -100, 0.5, -25)
button.Text = "Equip One Hit KO Punch"
button.Parent = screenGui

-- Create the dropdown menu button
local dropdownButton = Instance.new("TextButton")
dropdownButton.Size = UDim2.new(0, 150, 0, 40)
dropdownButton.Position = UDim2.new(0.5, -75, 0.5, 60)
dropdownButton.Text = "Toggle GUI"
dropdownButton.Parent = screenGui

-- Create the dropdown menu container (hidden by default)
local dropdownMenu = Instance.new("Frame")
dropdownMenu.Size = UDim2.new(0, 200, 0, 0)
dropdownMenu.Position = UDim2.new(0.5, -100, 0.5, 100)
dropdownMenu.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
dropdownMenu.Visible = false
dropdownMenu.Parent = screenGui

-- Add the button to the dropdown menu
local dropdownOption = Instance.new("TextButton")
dropdownOption.Size = UDim2.new(0, 200, 0, 40)
dropdownOption.Position = UDim2.new(0, 0, 0, 0)
dropdownOption.Text = "Equip One Hit KO Punch"
dropdownOption.Parent = dropdownMenu

-- Make the dropdown button toggle the menu visibility
dropdownButton.MouseButton1Click:Connect(function()
    dropdownMenu.Visible = not dropdownMenu.Visible
end)

-- Make the button inside the dropdown menu give the tool
dropdownOption.MouseButton1Click:Connect(function()
    -- Check if the player already has the tool
    if not player.Backpack:FindFirstChild("One Hit KO Punch") then
        -- Create the One Hit KO Punch tool
        local tool = Instance.new("Tool")
        tool.Name = "One Hit KO Punch"
        tool.RequiresHandle = true

        -- Create the handle part
        local handle = Instance.new("Part")
        handle.Size = Vector3.new(1, 1, 1)
        handle.Anchored = false
        handle.CanCollide = false
        handle.BrickColor = BrickColor.new("Bright red")
        handle.Name = "Handle"
        handle.Parent = tool

        -- Function to activate the tool and deal massive damage
        tool.Activated:Connect(function()
            local character = player.Character
            if character and character:FindFirstChild("HumanoidRootPart") then
                local mouse = player:GetMouse()
                local target = mouse.Target

                -- Check if the target is another player's character
                if target and target.Parent and target.Parent:FindFirstChild("Humanoid") and target.Parent ~= character then
                    local humanoid = target.Parent:FindFirstChild("Humanoid")
                    if humanoid then
                        -- Deal massive damage (99999999999999999999)
                        humanoid:TakeDamage(99999999999999999999)
                    end
                end
            end
        end)

        -- Give the tool to the player
        tool.Parent = player.Backpack
    else
        print("You already have the One Hit KO Punch!")
    end
end)

-- Make the button draggable
local dragging = false
local dragInput, dragStart, startPos

button.MouseButton1Down:Connect(function(input)
    -- Start dragging
    dragging = true
    dragStart = input.Position
    startPos = button.Position
    input.Changed:Connect(function()
        if input.UserInputState == Enum.UserInputState.End then
            -- Stop dragging
            dragging = false
        end
    end)
end)

button.MouseMove:Connect(function(input)
    if dragging then
        -- Update button position as the mouse moves
        local delta = input.Position - dragStart
        button.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)
