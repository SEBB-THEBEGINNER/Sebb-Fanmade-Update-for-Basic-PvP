-- Game Variables
local player = game.Players.LocalPlayer
local mouse = player:GetMouse()
local screen = game:GetService("Players").LocalPlayer.PlayerGui:WaitForChild("ScreenGui")

-- Assets
local background = Instance.new("ImageLabel")
background.Image = "rbxassetid://135980554202860"
background.Size = UDim2.new(1, 0, 1, 0)
background.Parent = screen

local floor = Instance.new("ImageLabel")
floor.Image = "rbxassetid://129587718897885"
floor.Size = UDim2.new(1, 0, 0.1, 0)
floor.Position = UDim2.new(0, 0, 0.9, 0)
floor.Parent = screen

local bird = Instance.new("ImageLabel")
bird.Image = "rbxassetid://127638108888162"  -- Starting flap (downflap)
bird.Size = UDim2.new(0, 50, 0, 50)
bird.Position = UDim2.new(0.1, 0, 0.5, 0)
bird.Parent = screen

local flapSpeed = 0.2  -- Speed of flapping
local gravity = 0.5    -- Gravity effect on the bird
local velocity = 0     -- Bird's vertical velocity

-- Pipe setup
local function createPipe()
    local pipeUp = Instance.new("ImageLabel")
    pipeUp.Image = "rbxassetid://87512883198055"
    pipeUp.Size = UDim2.new(0, 60, 0, math.random(200, 300))  -- Random height for the top pipe
    pipeUp.Position = UDim2.new(1, 0, 0, 0)
    pipeUp.Parent = screen

    local pipeDown = Instance.new("ImageLabel")
    pipeDown.Image = "rbxassetid://87512883198055"
    pipeDown.Size = UDim2.new(0, 60, 0, screen.AbsoluteSize.Y - pipeUp.Size.Y.Offset - 150)
    pipeDown.Position = UDim2.new(1, 0, 0, pipeUp.Size.Y.Offset + 150)
    pipeDown.Parent = screen

    return pipeUp, pipeDown
end

-- Flapping Mechanism
local function flap()
    if velocity <= 0 then
        bird.Image = "rbxassetid://133705047906282"  -- Up flap image
    else
        bird.Image = "rbxassetid://127638108888162"  -- Down flap image
    end
    velocity = -8  -- Set an initial velocity for the bird to move upwards
end

-- Update Game Loop
local function update()
    velocity = velocity + gravity  -- Apply gravity to the bird
    bird.Position = bird.Position + UDim2.new(0, 0, 0, velocity)  -- Move bird based on velocity
    
    if bird.Position.Y.Offset >= screen.AbsoluteSize.Y - floor.Size.Y.Offset - bird.Size.Y.Offset then
        bird.Position = UDim2.new(0.1, 0, 0.5, 0)  -- Reset bird if it hits the ground
        velocity = 0
    end
    
    -- Move pipes
    for _, pipe in pairs(screen:GetChildren()) do
        if pipe:IsA("ImageLabel") and pipe.Position.X.Offset < 0 then
            pipe:Destroy()  -- Remove pipe when it goes off-screen
        elseif pipe:IsA("ImageLabel") then
            pipe.Position = UDim2.new(pipe.Position.X.Offset - 2/1920, 0, pipe.Position.Y.Offset, 0)  -- Move pipes to the left
        end
    end
    
    -- Create new pipes
    if math.random() < 0.01 then
        createPipe()
    end
end

-- Listen to player input for flapping
mouse.KeyDown:Connect(function(key)
    if key == " " then  -- Spacebar to flap
        flap()
    end
end)

-- Main game loop
while true do
    update()
    wait(0.016)  -- Run at ~60 FPS
end
